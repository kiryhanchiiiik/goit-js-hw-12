{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst perPage = 100;\nlet loadedImages = 0;\n\nexport const fetchImages = (query, page = 1) => {\n  const BASE_URL = 'https://pixabay.com';\n  const API_KEY = '42410938-e2284def214256f6c05887d1a';\n  const URL = `${BASE_URL}/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  return axios\n    .get(URL)\n    .then(response => {\n      const totalHits = response.data.totalHits;\n\n      loadedImages += response.data.hits.length;\n      if (loadedImages >= totalHits) {\n        return iziToast.info({\n          message: `We're sorry, but you've reached the end of search results.`,\n          position: 'topRight',\n        });\n      }\n      return response.data.hits;\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n","import SimpleLightbox from 'simplelightbox';\n\nlet simpleLightbox;\n\nexport function renderGallery(images, container) {\n  const markup = images\n    .map(image => {\n      return `\n      <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n          <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n          <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n          <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n        </div>\n      </li>\n      `;\n    })\n    .join('');\n\n  container.insertAdjacentHTML('beforeend', markup);\n\n  if (!simpleLightbox) {\n    simpleLightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionsDelay: 200,\n    });\n  } else {\n    simpleLightbox.refresh();\n  }\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryContainer = document.querySelector('.gallery');\nconst preloader = document.querySelector('.preloader');\nconst loadMoreBtn = document.querySelector('.load-more-button');\n// const galleryItem = document.querySelector('.gallery-item');\n// const widthScrollElement = galleryItem.getBoundingClientRect();\nloadMoreBtn.classList.add('hidden');\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  preloader.style.display = 'flex';\n  const searchedValue = searchForm.elements.searchQuery.value.trim();\n\n  if (!searchedValue) {\n    iziToast.error({\n      message: 'Please, fill the input',\n      position: 'topRight',\n    });\n    preloader.style.display = 'none';\n    return;\n  }\n\n  if (searchedValue !== currentQuery) {\n    currentQuery = searchedValue;\n    currentPage = 1;\n    galleryContainer.innerHTML = '';\n    loadMoreBtn.classList.add('hidden');\n  }\n\n  try {\n    const images = await fetchImages(searchedValue);\n    renderGallery(images, galleryContainer);\n\n    if (images.length === 0) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    } else {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      message:\n        'An error occurred while fetching images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    preloader.style.display = 'none';\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  loadMoreBtn.classList.add('hidden');\n  currentPage += 1;\n  preloader.style.display = 'flex';\n  preloader.style.alignItems = 'flex-end';\n\n  try {\n    const images = await fetchImages(currentQuery, currentPage);\n    renderGallery(images, galleryContainer);\n\n    if (images.length === 0) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    } else {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (err) {\n    iziToast.error({\n      message:\n        'An error occurred while fetching images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    preloader.style.display = 'none';\n  }\n});\n"],"names":["perPage","loadedImages","fetchImages","query","page","URL","axios","response","totalHits","iziToast","err","simpleLightbox","renderGallery","images","container","markup","image","SimpleLightbox","searchForm","galleryContainer","preloader","loadMoreBtn","currentQuery","currentPage","event","searchedValue"],"mappings":"owBAGA,MAAMA,EAAU,IAChB,IAAIC,EAAe,EAEZ,MAAMC,EAAc,CAACC,EAAOC,EAAO,IAAM,CAG9C,MAAMC,EAAM,qEAAqCF,CAAK,iEAAiEC,CAAI,aAAaJ,CAAO,GAC/I,OAAOM,EACJ,IAAID,CAAG,EACP,KAAKE,GAAY,CAChB,MAAMC,EAAYD,EAAS,KAAK,UAGhC,OADAN,GAAgBM,EAAS,KAAK,KAAK,OAC/BN,GAAgBO,EACXC,EAAS,KAAK,CACnB,QAAS,6DACT,SAAU,UACpB,CAAS,EAEIF,EAAS,KAAK,IAC3B,CAAK,EACA,MAAMG,GAAO,CACZ,QAAQ,IAAIA,CAAG,CACrB,CAAK,CACL,ECzBA,IAAIC,EAEG,SAASC,EAAcC,EAAQC,EAAW,CAC/C,MAAMC,EAASF,EACZ,IAAIG,GACI;AAAA;AAAA,mBAEMA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,8CAGdA,EAAM,KAAK;AAAA,8CACXA,EAAM,KAAK;AAAA,iDACRA,EAAM,QAAQ;AAAA,kDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,OAI5D,EACA,KAAK,EAAE,EAEVF,EAAU,mBAAmB,YAAaC,CAAM,EAE3CJ,EAOHA,EAAe,QAAO,EANtBA,EAAiB,IAAIM,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,MACd,cAAe,GACrB,CAAK,CAIL,CCvBA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAc,SAAS,cAAc,mBAAmB,EAG9DA,EAAY,UAAU,IAAI,QAAQ,EAClC,IAAIC,EAAe,GACfC,EAAc,EAGlBL,EAAW,iBAAiB,SAAU,MAAMM,GAAS,CACnDA,EAAM,eAAc,EACpBJ,EAAU,MAAM,QAAU,OAC1B,MAAMK,EAAgBP,EAAW,SAAS,YAAY,MAAM,OAE5D,GAAI,CAACO,EAAe,CAClBhB,EAAS,MAAM,CACb,QAAS,yBACT,SAAU,UAChB,CAAK,EACDW,EAAU,MAAM,QAAU,OAC1B,MACD,CAEGK,IAAkBH,IACpBA,EAAeG,EACfF,EAAc,EACdJ,EAAiB,UAAY,GAC7BE,EAAY,UAAU,IAAI,QAAQ,GAGpC,GAAI,CACF,MAAMR,EAAS,MAAMX,EAAYuB,CAAa,EAG9C,GAFAb,EAAcC,EAAQM,CAAgB,EAElCN,EAAO,SAAW,EAAG,CACvBQ,EAAY,UAAU,IAAI,QAAQ,EAClCZ,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EACD,MACN,MACMY,EAAY,UAAU,OAAO,QAAQ,CAExC,MAAe,CACdZ,EAAS,MAAM,CACb,QACE,mEACF,SAAU,UAChB,CAAK,CACL,QAAY,CACRW,EAAU,MAAM,QAAU,MAC3B,CACH,CAAC,EAEDC,EAAY,iBAAiB,QAAS,SAAY,CAChDA,EAAY,UAAU,IAAI,QAAQ,EAClCE,GAAe,EACfH,EAAU,MAAM,QAAU,OAC1BA,EAAU,MAAM,WAAa,WAE7B,GAAI,CACF,MAAMP,EAAS,MAAMX,EAAYoB,EAAcC,CAAW,EAC1DX,EAAcC,EAAQM,CAAgB,EAElCN,EAAO,SAAW,GACpBQ,EAAY,UAAU,IAAI,QAAQ,EAClCZ,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,GAEDY,EAAY,UAAU,OAAO,QAAQ,CAExC,MAAa,CACZZ,EAAS,MAAM,CACb,QACE,mEACF,SAAU,UAChB,CAAK,CACL,QAAY,CACRW,EAAU,MAAM,QAAU,MAC3B,CACH,CAAC"}