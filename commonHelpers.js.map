{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst perPage = 100;\n\nexport const fetchImages = async (query, page = 1) => {\n  const BASE_URL = 'https://pixabay.com';\n  const API_KEY = '42410938-e2284def214256f6c05887d1a';\n  const URL = `${BASE_URL}/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(URL);\n    console.log(response.data);\n\n    return response.data;\n  } catch (err) {\n    console.error('Error fetching images:', err);\n    throw err;\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\n\nlet simpleLightbox;\n\nexport function renderGallery(images, container) {\n  const markup = images\n    .map(image => {\n      return `\n      <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n          <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n          <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n          <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n        </div>\n      </li>\n      `;\n    })\n    .join('');\n\n  container.insertAdjacentHTML('beforeend', markup);\n\n  if (!simpleLightbox) {\n    simpleLightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionsDelay: 200,\n    });\n  } else {\n    simpleLightbox.refresh();\n  }\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryContainer = document.querySelector('.gallery');\nconst preloader = document.querySelector('.preloader');\nconst loadMoreBtn = document.querySelector('.load-more-button');\nconst galleryItem = document.querySelector('.gallery-item');\n\nloadMoreBtn.classList.add('hidden');\n\nlet currentQuery = '';\nlet currentPage = 1;\nconst perPage = 100;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  preloader.style.display = 'flex';\n  const searchedValue = searchForm.elements.searchQuery.value.trim();\n\n  if (!searchedValue) {\n    iziToast.error({\n      message: 'Please, fill the input',\n      position: 'topRight',\n    });\n    preloader.style.display = 'none';\n    return;\n  }\n\n  if (searchedValue !== currentQuery) {\n    currentQuery = searchedValue;\n    currentPage = 1;\n    galleryContainer.innerHTML = '';\n    loadMoreBtn.classList.add('hidden');\n  }\n\n  try {\n    const data = await fetchImages(searchedValue, currentPage);\n    renderGallery(data.hits, galleryContainer);\n\n    if (data.hits.length === 0) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      searchForm.reset();\n      return;\n    } else {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      message:\n        'An error occurred while fetching images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    preloader.style.display = 'none';\n  }\n});\n\nfunction getCardHeight() {\n  const card = galleryContainer.querySelector('.gallery-item');\n  if (card) {\n    const rect = card.getBoundingClientRect();\n    return rect.height;\n  } else {\n    console.error('Element not found.');\n    return 0;\n  }\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  try {\n    loadMoreBtn.classList.add('hidden');\n    preloader.style.display = 'flex';\n    preloader.style.alignItems = 'flex-end';\n    currentPage += 1;\n    const data = await fetchImages(currentQuery, currentPage);\n    renderGallery(data.hits, galleryContainer);\n    preloader.style.display = 'none';\n    loadMoreBtn.classList.remove('hidden');\n    if (currentPage * perPage >= data.totalHits) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.info({\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n      });\n    }\n\n    setTimeout(() => {\n      const cardHeight = getCardHeight();\n      if (cardHeight > 0) {\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n    }, 0);\n  } catch (err) {\n    console.log(err);\n    preloader.style.display = 'none';\n    loadMoreBtn.classList.remove('hidden');\n  }\n});\n"],"names":["perPage","fetchImages","query","page","URL","response","axios","err","simpleLightbox","renderGallery","images","container","markup","image","SimpleLightbox","searchForm","galleryContainer","preloader","loadMoreBtn","currentQuery","currentPage","event","searchedValue","iziToast","data","error","getCardHeight","card","cardHeight"],"mappings":"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"}